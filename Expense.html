<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-image: url('https://cdnjs.cloudflare.com/ajax/libs/simple-icons/1.0.0/simple-icons.svg');
            background-size: 300px;
            background-repeat: repeat;
            background-attachment: fixed;
            background-position: center;
            background-blend-mode: overlay;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .expense-item {
            transition: all 0.3s ease;
        }
        .expense-item:hover {
            transform: translateX(5px);
            border-left: 4px solid #3b82f6;
        }
        .btn-hover {
            transition: all 0.3s ease;
        }
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px rgba(59, 130, 246, 0.3);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        
        /* Category badges */
        .category-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .category-Food { 
            background-color: #e9f5ff; 
            color: #3b82f6; 
        }
        .category-Transport { 
            background-color: #f0fdf4; 
            color: #22c55e; 
        }
        .category-Utilities { 
            background-color: #fef3c7; 
            color: #d97706; 
        }
        .category-Entertainment { 
            background-color: #fce7f3; 
            color: #db2777; 
        }
        .category-Other { 
            background-color: #f3f4f6; 
            color: #6b7280; 
        }
        
        /* Neumorphic effect */
        .neumorphic {
            box-shadow: 8px 8px 15px rgba(0, 0, 0, 0.05),
                        -8px -8px 15px rgba(255, 255, 255, 0.8);
        }
        
        /* Custom shapes */
        .shape-blob {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(145deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            filter: blur(20px);
            z-index: -1;
        }
        
        /* Custom inputs */
        .custom-input {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .custom-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }
        
        /* Progress bar animation */
        @keyframes fill {
            from { width: 0; }
            to { width: 100%; }
        }
        .progress-animation {
            animation: fill 0.8s ease-out forwards;
        }
        
        /* Custom calendar date style */
        .date-bubble {
            background: linear-gradient(145deg, #6366f1, #3b82f6);
            color: white;
            border-radius: 12px;
            min-width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(99, 102, 241, 0.3);
        }
        
        /* Floating label effect */
        .input-container {
            position: relative;
        }
        .floating-label {
            position: absolute;
            left: 46px;
            top: 18px;
            color: #94a3b8;
            transition: all 0.2s ease;
            pointer-events: none;
        }
        .custom-input:focus + .floating-label,
        .custom-input:not(:placeholder-shown) + .floating-label {
            transform: translateY(-24px) scale(0.85);
            color: #3b82f6;
            font-weight: 500;
        }
        .custom-input::placeholder {
            color: transparent;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen py-8">
    <!-- Background shapes -->
    <div class="shape-blob w-96 h-96 top-0 left-0 opacity-70"></div>
    <div class="shape-blob w-72 h-72 bottom-0 right-0 opacity-50"></div>
    <div class="shape-blob w-64 h-64 top-1/2 left-1/2 opacity-60"></div>

    <div class="container mx-auto p-4 md:p-6 max-w-6xl relative z-10">
        <header class="text-center mb-12 relative">
            <span class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-6xl opacity-10 font-bold text-indigo-900">FINANCE</span>
            <h1 class="text-4xl md:text-5xl font-extrabold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-violet-700 animate__animated animate__fadeIn">Expense Manager</h1>
            <div class="h-1 w-24 bg-gradient-to-r from-blue-500 to-violet-600 mx-auto rounded-full mb-3"></div>
            <p class="text-gray-600 animate__animated animate__fadeIn animate__delay-1s">Smart financial tracking for your daily expenses</p>
        </header>

        <!-- Stats overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8 animate__animated animate__fadeIn animate__delay-1s">
            <div class="bg-white rounded-2xl p-4 flex items-center neumorphic">
                <div class="bg-blue-100 p-3 rounded-xl mr-3">
                    <i class="fas fa-wallet text-blue-600"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-500">THIS MONTH</p>
                    <p class="text-lg font-bold text-gray-800" id="monthTotal">₹0.00</p>
                </div>
            </div>
            <div class="bg-white rounded-2xl p-4 flex items-center neumorphic">
                <div class="bg-green-100 p-3 rounded-xl mr-3">
                    <i class="fas fa-chart-line text-green-600"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-500">AVERAGE</p>
                    <p class="text-lg font-bold text-gray-800" id="averageExpense">₹0.00</p>
                </div>
            </div>
            <div class="bg-white rounded-2xl p-4 flex items-center neumorphic">
                <div class="bg-purple-100 p-3 rounded-xl mr-3">
                    <i class="fas fa-receipt text-purple-600"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-500">EXPENSES</p>
                    <p class="text-lg font-bold text-gray-800" id="expenseCount">0</p>
                </div>
            </div>
            <div class="bg-white rounded-2xl p-4 flex items-center neumorphic">
                <div class="bg-indigo-100 p-3 rounded-xl mr-3">
                    <i class="fas fa-certificate text-indigo-600"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-500">TOP CATEGORY</p>
                    <p class="text-lg font-bold text-gray-800" id="topCategory">-</p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Expense Form -->
            <div class="lg:col-span-1">
                <div class="bg-white p-8 rounded-3xl shadow-xl card-hover glass-effect animate__animated animate__fadeIn">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center">
                            <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-3 rounded-xl mr-3 text-white">
                                <i class="fas fa-plus"></i>
                            </div>
                            <h2 class="text-xl font-semibold text-gray-800">New Expense</h2>
                        </div>
                        <div class="bg-blue-50 p-2 rounded-lg cursor-pointer hover:bg-blue-100 transition">
                            <i class="fas fa-info-circle text-blue-500"></i>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="input-container">
                            <div class="relative">
                                <div class="absolute left-3 top-3 bg-blue-50 p-2 rounded-lg">
                                    <i class="fas fa-file-alt text-blue-500"></i>
                                </div>
                                <input type="text" id="description" placeholder=" " class="pl-14 w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none transition custom-input">
                                <label for="description" class="floating-label">Description</label>
                            </div>
                        </div>
                        
                        <div class="input-container">
                            <div class="relative">
                                <div class="absolute left-3 top-3 bg-green-50 p-2 rounded-lg">
                                    <i class="fas fa-rupee-sign text-green-500"></i>
                                </div>
                                <input type="number" id="amount" placeholder=" " step="0.01" class="pl-14 w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none transition custom-input">
                                <label for="amount" class="floating-label">Amount</label>
                            </div>
                        </div>
                        
                        <div class="relative">
                            <div class="absolute left-3 top-3 bg-purple-50 p-2 rounded-lg">
                                <i class="fas fa-tag text-purple-500"></i>
                            </div>
                            <select id="category" class="pl-14 w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none transition custom-input appearance-none">
                                <option value="Food">Food</option>
                                <option value="Transport">Transport</option>
                                <option value="Utilities">Utilities</option>
                                <option value="Entertainment">Entertainment</option>
                                <option value="Other">Other</option>
                            </select>
                            <i class="fas fa-chevron-down text-gray-400 absolute right-4 top-5 pointer-events-none"></i>
                        </div>
                        
                        <div class="relative">
                            <div class="absolute left-3 top-3 bg-indigo-50 p-2 rounded-lg">
                                <i class="fas fa-calendar text-indigo-500"></i>
                            </div>
                            <input type="date" id="date" class="pl-14 w-full p-4 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none transition custom-input">
                        </div>
                    </div>
                    
                    <button onclick="addExpense()" class="w-full mt-8 bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 rounded-xl font-semibold btn-hover flex items-center justify-center">
                        <i class="fas fa-plus-circle mr-2"></i>
                        Add Expense
                    </button>

                    <div class="mt-6 text-center">
                        <p class="text-xs text-gray-500">All expenses are stored locally in your browser</p>
                    </div>
                </div>
            </div>

            <!-- Expense History and Stats -->
            <div class="lg:col-span-2">
                <!-- Month Filter and Total -->
                <div class="bg-white p-6 rounded-3xl shadow-xl mb-6 card-hover glass-effect animate__animated animate__fadeIn animate__delay-1s">
                    <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                        <div class="flex items-center space-x-3">
                            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-3 rounded-xl text-white">
                                <i class="fas fa-filter"></i>
                            </div>
                            <select id="monthFilter" onchange="updateExpenses()" class="p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none transition custom-input">
                                <option value="all">All Months</option>
                            </select>
                        </div>
                        
                        <div class="flex items-center bg-gradient-to-r from-indigo-600 to-purple-700 text-white px-6 py-3 rounded-xl shadow-lg">
                            <div class="mr-3">
                                <i class="fas fa-chart-pie text-white text-xl"></i>
                            </div>
                            <div>
                                <p class="text-xs text-indigo-200">TOTAL EXPENSES</p>
                                <p class="text-2xl font-bold" id="total">₹0.00</p>
                            </div>
                        </div>
                    </div>

                    <!-- Progress bar -->
                    <div class="mt-6">
                        <div class="flex justify-between text-xs text-gray-500 mb-1">
                            <span>Budget Progress</span>
                            <span id="budgetPercentage">0%</span>
                        </div>
                        <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full progress-animation" style="width: 0%" id="progressBar"></div>
                        </div>
                    </div>
                </div>

                <!-- Expense List -->
                <div class="bg-white p-6 rounded-3xl shadow-xl card-hover glass-effect animate__animated animate__fadeIn animate__delay-2s">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center">
                            <div class="bg-gradient-to-r from-indigo-500 to-purple-600 p-3 rounded-xl mr-3 text-white">
                                <i class="fas fa-history"></i>
                            </div>
                            <h2 class="text-xl font-semibold text-gray-800">Expense History</h2>
                        </div>
                        <div class="flex space-x-2">
                            <div class="bg-gray-100 p-2 rounded-lg cursor-pointer hover:bg-gray-200 transition">
                                <i class="fas fa-sort-amount-down text-gray-600"></i>
                            </div>
                            <div class="bg-gray-100 p-2 rounded-lg cursor-pointer hover:bg-gray-200 transition">
                                <i class="fas fa-search text-gray-600"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div id="expenseList" class="space-y-6 max-h-96 overflow-y-auto pr-2"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center py-8 text-gray-500 text-sm mt-10">
        <div class="flex justify-center space-x-4 mb-4">
            <div class="bg-gray-100 p-2 rounded-full hover:bg-gray-200 transition cursor-pointer">
                <i class="fas fa-envelope text-gray-600"></i>
            </div>
            <div class="bg-gray-100 p-2 rounded-full hover:bg-gray-200 transition cursor-pointer">
                <i class="fab fa-github text-gray-600"></i>
            </div>
            <div class="bg-gray-100 p-2 rounded-full hover:bg-gray-200 transition cursor-pointer">
                <i class="fas fa-question-circle text-gray-600"></i>
            </div>
        </div>
        <p>© 2025 Expense Manager Pro | Designed with <i class="fas fa-heart text-red-400"></i></p>
    </footer>

    <script>
        let expenses = [];

        function addExpense() {
            const description = document.getElementById('description').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const category = document.getElementById('category').value;
            const date = document.getElementById('date').value;

            if (!description || isNaN(amount) || amount <= 0 || !date) {
                alert('Please fill in all fields with valid data');
                return;
            }

            expenses.push({ id: Date.now(), description, amount, category, date });
            updateMonthFilter();
            updateExpenses();

            document.getElementById('description').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('category').value = 'Food';
            document.getElementById('date').value = '';
        }

        function updateMonthFilter() {
            const monthFilter = document.getElementById('monthFilter');
            const years = [...new Set(expenses.map(exp => new Date(exp.date).getFullYear()))];
            const currentYear = new Date().getFullYear();
            if (!years.includes(currentYear)) years.push(currentYear); // Ensure current year is included

            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];

            // Generate options for all months in each year, sorted by year (newest first)
            const monthYearOptions = years.sort((a, b) => b - a).flatMap(year => 
                months.map(month => `${month} ${year}`)
            );

            monthFilter.innerHTML = '<option value="all">All Months</option>' + 
                monthYearOptions.map(my => `<option value="${my}">${my}</option>`).join('');
        }

        function updateExpenses() {
            renderExpenses();
            updateTotal();
            updateStats();
        }

        function renderExpenses() {
            const monthFilter = document.getElementById('monthFilter').value;
            const expenseList = document.getElementById('expenseList');
            expenseList.innerHTML = '';

            // Filter expenses by selected month
            let filteredExpenses = monthFilter === 'all' 
                ? expenses 
                : expenses.filter(exp => {
                    const date = new Date(exp.date);
                    return `${date.toLocaleString('default', { month: 'long' })} ${date.getFullYear()}` === monthFilter;
                });

            // Group expenses by month and year
            const groupedExpenses = filteredExpenses.reduce((acc, expense) => {
                const date = new Date(expense.date);
                const monthYear = `${date.toLocaleString('default', { month: 'long' })} ${date.getFullYear()}`;
                if (!acc[monthYear]) acc[monthYear] = [];
                acc[monthYear].push(expense);
                return acc;
            }, {});

            // Sort months in descending order
            const sortedMonths = Object.keys(groupedExpenses).sort((a, b) => new Date(b) - new Date(a));

            // Render each month's expenses
            if (sortedMonths.length === 0) {
                expenseList.innerHTML = `
                    <div class="flex flex-col items-center justify-center py-12 fade-in">
                        <div class="bg-gradient-to-r from-gray-100 to-gray-200 p-6 rounded-full mb-5">
                            <i class="fas fa-receipt text-gray-400 text-4xl"></i>
                        </div>
                        <p class="text-gray-700 font-medium">No expenses for this period</p>
                        <p class="text-gray-500 text-sm mt-2">Add your first expense to get started</p>
                        <button onclick="focusOnDescription()" class="mt-4 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Now
                        </button>
                    </div>
                `;
                return;
            }

            sortedMonths.forEach(monthYear => {
                const monthDiv = document.createElement('div');
                monthDiv.className = 'mb-8 slide-in';
                monthDiv.innerHTML = `
                    <div class="flex items-center mb-4">
                        <div class="w-3 h-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full mr-3"></div>
                        <h3 class="text-lg font-medium text-gray-800">${monthYear}</h3>
                    </div>
                `;
                
                const ul = document.createElement('ul');
                ul.className = 'space-y-4';
                
                // Display expenses within each month by date (newest first)
                groupedExpenses[monthYear].sort((a, b) => new Date(b.date) - new Date(a.date)).forEach(expense => {
                    const li = document.createElement('li');
                    li.className = 'flex justify-between p-4 bg-gray-50 rounded-xl expense-item border border-gray-100 hover:shadow-md';
                    
                    // Format date for display
                    const expDate = new Date(expense.date);
                    const day = expDate.getDate();
                    const monthShort = expDate.toLocaleDateString('en-US', { month: 'short' });
                    
                    li.innerHTML = `
                        <div class="flex items-center">
                            <div class="date-bubble mr-4">
                                <span class="text-xs">${monthShort}</span>
                                <span class="text-lg leading-none">${day}</span>
                            </div>
                            <div>
                                <div class="font-medium text-gray-800">${expense.description}</div>
                                <div class="flex items-center mt-1.5">
                                    <span class="category-badge category-${expense.category}">${expense.category}</span>
                                    <span class="text-xs text-gray-500 ml-2"><i class="far fa-clock mr-1"></i>${getTimeAgo(expense.id)}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="text-red-500 font-semibold text-lg">₹${expense.amount.toFixed(2)}</span>
                        </div>
                    `;
                    ul.appendChild(li);
                });
                
                monthDiv.appendChild(ul);
                expenseList.appendChild(monthDiv);
            });
        }

        function getTimeAgo(timestamp) {
            const now = Date.now();
            const diff = now - timestamp;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (days > 0) return `${days}d ago`;
            if (hours > 0) return `${hours}h ago`;
            if (minutes > 0) return `${minutes}m ago`;
            return 'Just now';
        }

        function focusOnDescription() {
            document.getElementById('description').focus();
        }

        function updateTotal() {
            const monthFilter = document.getElementById('monthFilter').value;
            const filteredExpenses = monthFilter === 'all' 
                ? expenses 
                : expenses.filter(exp => {
                    const date = new Date(exp.date);
                    return `${date.toLocaleString('default', { month: 'long' })} ${date.getFullYear()}` === monthFilter;
                });
            const total = filteredExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            document.getElementById('total').textContent = `₹${total.toFixed(2)}`;
            
            // Update progress bar (assuming a budget of ₹10,000)
            const budget = 10000;
            const percentage = Math.min((total / budget) * 100, 100);
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('budgetPercentage').textContent = `${Math.round(percentage)}%`;
            
            // Change progress bar color based on percentage
            if (percentage > 80) {
                document.getElementById('progressBar').className = 'h-full bg-gradient-to-r from-red-400 to-red-600 rounded-full progress-animation';
            } else if (percentage > 50) {
                document.getElementById('progressBar').className = 'h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full progress-animation';
            } else {
                document.getElementById('progressBar').className = 'h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full progress-animation';
            }
        }

        // Calculate and update stats
        function updateStats() {
            // This month's total
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            const thisMonthExpenses = expenses.filter(exp => {
                const date = new Date(exp.date);
                return date.getMonth() === currentMonth && date.getFullYear() === currentYear;
            });
            
            const thisMonthTotal = thisMonthExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            document.getElementById('monthTotal').textContent = `₹${thisMonthTotal.toFixed(2)}`;
            
            // Average expense
            const average = expenses.length > 0 ? expenses.reduce((sum, expense) => sum + expense.amount, 0) / expenses.length : 0;
            document.getElementById('averageExpense').textContent = `₹${average.toFixed(2)}`;
            
            // Expense count
            document.getElementById('expenseCount').textContent = expenses.length;
            
            // Top category
            if (expenses.length > 0) {
                const categoryCounts = expenses.reduce((acc, expense) => {
                    acc[expense.category] = (acc[expense.category] || 0) + 1;
                    return acc;
                }, {});
                
                const topCategory = Object.entries(categoryCounts).sort((a, b) => b[1] - a[1])[0][0];
                document.getElementById('topCategory').textContent = topCategory;
            } else {
                document.getElementById('topCategory').textContent = '-';
            }
        }

        updateMonthFilter();
        updateExpenses();

        // Set today's date as default
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
        });
    </script>
</body>
</html>